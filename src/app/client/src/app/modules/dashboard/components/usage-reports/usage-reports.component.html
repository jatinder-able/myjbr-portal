<div class="ui container" [appTelemetryImpression]="telemetryImpression">
    <!-- <div class="ui stackable grid mt-30" *ngIf="!noResult"> -->
    <div class="ui stackable grid">
        <!-- <div class="three wide column pt-0">
            <div class="publicmenusection ui secondary vertical menu">
                <a appTelemetryInteract [telemetryInteractObject]="setTelemetryInteractObject(report.id)"
                    [telemetryInteractEdata]="telemetryInteractEdata" *ngFor="let report of reportMetaData"
                    (click)="renderReport(report)" class="item" [ngClass]="{'active': currentReport.id === report.id}">
                    {{report.label || report.title}}</a>
            </div>
        </div> -->
        <div class="twelve wide column workspacesegment">
            <h2 class="ui small header">
                {{currentReport?.title || currentReport?.label}}
            </h2>
            <p *ngIf="currentReport?.description" [innerHTML]="transformHTML(currentReport.description)"></p>
            <sui-tabset>
                <div class="ui top attached tabular menu">
                    <a (click)="reportType('trainingstats')" class="item"
                        suiTabHeader="trainingstats">{{resourceService?.frmelmnts?.lbl?.trainingstats}}</a>
                    <a (click)="reportType('trainingdashboard')" class="item" suiTabHeader="trainingdashboard"
                        *ngIf="courseMentor">{{resourceService?.frmelmnts?.lbl?.trainingdashboard}}</a>
                    <a (click)="reportType('staticsReport');contentCreationStaticsComponent?.getContentCreationStaticsReport('14d');"
                        class="item" *ngIf="isOrgAdmin || isCreator"
                        suiTabHeader="staticsReport">{{resourceService?.frmelmnts?.lnk?.staticsReport}}</a>
                    <a (click)="reportType('userDetailsReport');getUserDetailsReport('14d');" class="item" appPermission
                        *ngIf="userProfile?.rootOrgAdmin" [permission]='adminDashboard'
                        suiTabHeader="userDetailsReport">{{resourceService?.frmelmnts?.lnk?.userDetailsReport}}</a>
                    <!-- <a (click)="reportType('graph')" class="item" appPermission [permission]='adminDashboard'
                        suiTabHeader="graph">{{resourceService?.frmelmnts?.lbl?.graphs}}</a>
                    <a (click)="reportType('data')" class="item" appPermission [permission]='adminDashboard'
                        suiTabHeader="tableMenu">{{resourceService?.frmelmnts?.lbl?.tables}}</a> -->
                    <!-- <div class="right menu">
                        <a *ngIf="currentReport?.downloadUrl" class="ui item" appTelemetryInteract
                            [telemetryInteractObject]="setTelemetryInteractObject(currentReport.id)"
                            [telemetryInteractEdata]="telemetryInteractDownloadEdata"
                            (click)="downloadCSV(currentReport.downloadUrl)">{{resourceService?.frmelmnts?.lbl?.downloadCsv}}</a>
                    </div> -->
                </div>
                <div class="ui bottom attached segment" suiTabContent="userDetailsReport">
                    <div class="ui grid">
                        <div class="twelve wide column" id="orgChartDataSection">
                            <h5><b style="color: #b70303;">Org Structure</b></h5>
                        </div>
                    </div>
                    <div class="ui grid">
                        <div class="twelve wide column" id="orgChartDataSection">
                            <ng2-org-chart [topEmployee]="orgChartData"></ng2-org-chart>
                        </div>
                    </div>
                    <br><br>
                    <div class="ui grid stackable top aligned my-0">
                        <div class="twelve wide tablet ten wide computer column mobile-p-0">
                            <div class="ui grid pl-5">
                                <div class="twelve wide column" style="padding-bottom: 0;">
                                    <div class="ui text menu float-ContentLeft my-0" style="min-height: 0;">
                                        <span class="dashBoardMenuItem cursor-pointer"
                                            style="cursor: default !important;">USERS
                                            CREATED IN</span>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <span class="dashBoardMenuItem cursor-pointer active"
                                            (click)="getUserDetailsReport('14d')"
                                            [ngClass]="{'active': selectedDateRange === '14d' }" appTelemetryInteract
                                            [telemetryInteractObject]="interactObject"
                                            [telemetryInteractEdata]="{id:'14d',type:'click',pageid:'content-creation-dashboard'}">
                                            {{resourceService?.frmelmnts?.lbl?.dashboardfourteendaysfilter}}
                                        </span>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <span class="dashBoardMenuItem cursor-pointer"
                                            (click)="getUserDetailsReport('2m')"
                                            [ngClass]="{'active': selectedDateRange === '2m' }" appTelemetryInteract
                                            [telemetryInteractObject]="interactObject"
                                            [telemetryInteractEdata]="{id:'2m',type:'click',pageid:'content-creation-dashboard'}">
                                            {{resourceService?.frmelmnts?.lbl?.dashboardtwomonthsfilter}}
                                        </span>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <span class="dashBoardMenuItem cursor-pointer"
                                            (click)="getUserDetailsReport('6m')"
                                            [ngClass]="{'active': selectedDateRange === '6m' }" appTelemetryInteract
                                            [telemetryInteractObject]="interactObject"
                                            [telemetryInteractEdata]="{id:'6m',type:'click',pageid:'content-creation-dashboard'}">
                                            {{resourceService?.frmelmnts?.lbl?.dashboardsixmonthsfilter}}
                                        </span>&nbsp;&nbsp;&nbsp;&nbsp;
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ui grid" *ngIf="showUserDetailsReport && userDashboardData.length > 0">
                        <div class="userDetailsBlockSection">
                            <ngx-slick class="carousel" #slickModal="slick-modal" [config]="slideConfig">
                                <div ngxSlickItem class="userDetailsBlockCard mt-20 mb-20 ml-20"
                                    *ngFor="let block of userDetailsBlock" [class.active]="block.label === selectedOrg"
                                    (click)="filterUserDashboardData(block.label)">
                                    <div class="content center aligned">
                                        <h2 class="description dashboardCardSubText">{{block.value}}</h2>
                                        <div class="meta dashBoardCardText">{{block.label}}</div>
                                    </div>
                                </div>
                            </ngx-slick>
                        </div>
                    </div>
                    <!-- <div class="ui grid" *ngIf="showUserDetailsReport && userDashboardData.length > 0">
                        <div class="twelve wide column">
                            <div class="ui four cards">
                                <div class="card" *ngFor="let block of userDetailsBlock"
                                    [class.active]="block.label === selectedOrg" style="cursor: pointer;height: 85px;"
                                    (click)="filterUserDashboardData(block.label)">
                                    <div class="content center aligned">
                                        <h2 class="description dashboardCardSubText" style="line-height: 20px;">
                                            {{block.value}}</h2>
                                        <div class="meta dashBoardCardText" style="font-size: 0.9em;">{{block.label}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div> -->
                    <div class="ui grid" *ngIf="showUserDetailsReport && userDashboardData.length > 0">
                        <div class="twelve wide column" style="padding-top: 0;">
                            <p-table #dtUserDetails [value]="selectedUserDashboardData" [columns]="userDashboardColumns"
                                [paginator]="true" [rows]="15" [resizableColumns]="true" dataKey="id">
                                <ng-template pTemplate="caption">
                                    <div class="ui small left icon input" style="float: left">
                                        <i class="search icon"></i>
                                        <input type="text" pInputText placeholder="Search"
                                            (input)="dtUserDetails.filterGlobal($event.target.value, 'contains')"
                                            style="width: 210px;">
                                    </div>
                                    <div class="ui-helper-clearfix">
                                        <button type="button" pButton icon="fa fa-file" iconPos="left" label="Export"
                                            (click)="dtUserDetails.exportCSV()" style="float:right"></button>
                                    </div>
                                </ng-template>
                                <ng-template pTemplate="header" let-columns>
                                    <tr>
                                        <th style="width: 3em"></th>
                                        <th *ngFor="let col of columns" pResizableColumn [style.width]="col.width">
                                            {{col.header}}
                                        </th>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="body" let-rowData let-expanded="expanded" let-columns="columns">
                                    <tr>
                                        <td>
                                            <a href="#" [pRowToggler]="rowData">
                                                <i
                                                    [ngClass]="expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"></i>
                                            </a>
                                        </td>
                                        <td *ngFor="let col of columns" class="ui-resizable-column">
                                            {{rowData[col.field]}}
                                            <!-- <span *ngIf="col.header != 'Organizations'">{{rowData[col.field]}}</span> -->
                                            <!-- <span *ngIf="col.header === 'Organizations'">
                                                <span *ngFor="let obj of rowData?.organisations;let i=index">
                                                    {{obj.orgName}}
                                                    <i *ngIf="i != (rowData?.organisations.length -1)">,&nbsp;</i>
                                                </span> -->
                                            <!-- <div *ngFor="let obj of rowData?.organisations;let i=index"
                                                    style="padding-bottom:4px">
                                                    <span>
                                                        <b *ngIf="obj.orgName != undefined">{{(obj.orgName)}}</b><b
                                                            *ngIf="obj.orgName == undefined">{{(obj.organisationId)}}</b>
                                                        : {{obj.userRoles}}
                                                    </span>
                                                    <span *ngIf="i != (rowData?.organisations.length -1)"
                                                        class="dashed-border"></span>
                                                </div> -->
                                            <!-- </span> -->
                                        </td>
                                    </tr>
                                </ng-template>
                                <ng-template pTemplate="rowexpansion" let-rowData let-columns="columns">
                                    <tr>
                                        <td [attr.colspan]="columns.length + 1">
                                            <div class="ui-g ui-fluid" style="font-size:16px;padding:20px">
                                                <div class="ui-g-12 ui-md-12">
                                                    <div class="ui-g">
                                                        <div class="ui-g-12 mb-10"
                                                            *ngFor="let orgDetail of rowData.organisations"
                                                            style="font-size: 11px;">
                                                            <b>{{orgDetail.orgName}}:</b> <span class="role-label"
                                                                *ngFor="let role of orgDetail.roles">{{role}}</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </td>
                                    </tr>
                                </ng-template>
                            </p-table>
                        </div>
                    </div>
                    <div class="ui grid" *ngIf="!showUserDetailsReport">
                        <div class="one wide column"></div>
                        <div class="ten wide column">
                            <div class="ui two column centered grid no-result-container">
                                <div class="column">
                                    <img src="{{'assets/images/erroricon.png' | cdnprefixurl}}">
                                    <div class="no-result-text">{{resourceService?.messages?.stmsg?.m0131}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="one wide column"></div>
                    </div>
                </div>
                <div class="ui bottom attached segment" suiTabContent="staticsReport">
                    <app-content-creation-statics></app-content-creation-statics>
                </div>
                <div class="ui bottom attached segment" suiTabContent="trainingdashboard">
                    <div class="ui grid stackable top aligned my-0">
                        <div class="twelve wide tablet ten wide computer column mobile-p-0">
                            <div class="ui grid pl-5">
                                <div class="six wide column">
                                    <div class="ui text menu float-ContentLeft my-0" style="min-height: 0;">
                                        <span class="dashBoardMenuItem cursor-pointer active"
                                            (click)="getBatches('14d')"
                                            [ngClass]="{'active': selectedBatchRange === '14d' }" appTelemetryInteract
                                            [telemetryInteractObject]="interactObject"
                                            [telemetryInteractEdata]="{id:'14d',type:'click',pageid:'content-creation-dashboard'}">
                                            {{resourceService?.frmelmnts?.lbl?.dashboardfourteendaysfilter}}
                                        </span>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <span class="dashBoardMenuItem cursor-pointer" (click)="getBatches('2m')"
                                            [ngClass]="{'active': selectedBatchRange === '2m' }" appTelemetryInteract
                                            [telemetryInteractObject]="interactObject"
                                            [telemetryInteractEdata]="{id:'2m',type:'click',pageid:'content-creation-dashboard'}">
                                            {{resourceService?.frmelmnts?.lbl?.dashboardtwomonthsfilter}}
                                        </span>&nbsp;&nbsp;&nbsp;&nbsp;
                                        <span class="dashBoardMenuItem cursor-pointer" (click)="getBatches('6m')"
                                            [ngClass]="{'active': selectedBatchRange === '6m' }" appTelemetryInteract
                                            [telemetryInteractObject]="interactObject"
                                            [telemetryInteractEdata]="{id:'6m',type:'click',pageid:'content-creation-dashboard'}">
                                            {{resourceService?.frmelmnts?.lbl?.dashboardsixmonthsfilter}}
                                        </span>&nbsp;&nbsp;&nbsp;&nbsp;
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ui grid mt-0" *ngIf="batchList?.length > 0">
                        <div class="eight wide column">
                            <div class="field">
                                <div class="mt-10" style="cursor: pointer">
                                    <p-dropdown [options]="batchList" [(ngModel)]="selectedBatch" optionLabel="name"
                                        [ngModelOptions]="{standalone: true}"
                                        (onChange)="populateCourseDashboardData(selectedBatch)">
                                    </p-dropdown>
                                </div>
                            </div>
                            <div class="d-flex my-20"
                                *ngIf="courseDashboardData && showTrainingdashboard && courseDashboardData?.data?.length > 0">
                                <span class="course-start-dt black-divider pr-15">
                                    <b *ngIf="courseDashboardData?.startDate">
                                        {{resourceService?.frmelmnts?.lbl?.batchstartdate}}&nbsp;:
                                    </b>
                                    &nbsp;&nbsp;{{courseDashboardData?.startDate | dateFormat :'DD/MM/YYYY' }}
                                </span>
                                <span class="course-end-dt black-divider px-15">
                                    <b>{{resourceService?.frmelmnts?.lbl?.batchenddate}}&nbsp;:
                                    </b>
                                    &nbsp;&nbsp;
                                    <span
                                        *ngIf="courseDashboardData?.endDate">{{courseDashboardData?.endDate | dateFormat :'DD/MM/YYYY'}}</span>
                                    <span *ngIf="!courseDashboardData?.endDate">-</span>
                                </span>
                                <span *ngIf="courseDashboardData?.count"
                                    class="course-participants black-divider px-15">
                                    <b>{{resourceService?.frmelmnts?.lbl?.participants}}&nbsp;:
                                    </b> &nbsp;&nbsp; {{courseDashboardData?.count}}
                                </span>
                                <span *ngIf="courseDashboardData?.completedCount" class="course-completed pl-15">
                                    <b>{{resourceService?.frmelmnts?.lbl?.completedCourse}}&nbsp;:
                                    </b>
                                    &nbsp;&nbsp;{{courseDashboardData?.completedCount}}
                                </span>
                            </div>
                        </div>
                        <div class="four wide column" style="width:'30vw'"
                            *ngIf="showTrainingdashboard && courseDashboardData?.data?.length > 0">
                            <p-chart type="bar" [data]="barChartData" [options]="barChartOptions"></p-chart>
                        </div>
                    </div>
                    <div class="twelve wide column"
                        *ngIf="showTrainingdashboard && courseDashboardData?.data?.length > 0">
                        <p-table #dtCourseDashboard [value]="courseDashboardData?.data"
                            [columns]="courseDashboardColumns" [paginator]="true" [rows]="10" [resizableColumns]="true">
                            <ng-template pTemplate="caption">
                                <div class="ui small left icon input" style="float: left">
                                    <i class="search icon"></i>
                                    <input type="text" pInputText placeholder="Search"
                                        (input)="dtCourseDashboard.filterGlobal($event.target.value, 'contains')"
                                        style="width: 210px;">
                                </div>
                                <div class="ui-helper-clearfix">
                                    <button type="button" pButton icon="fa fa-file" iconPos="left" label="Export"
                                        (click)="dtCourseDashboard.exportCSV()" style="float:right"></button>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th *ngFor="let col of columns" pResizableColumn>
                                        {{col.header}}
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-rowData let-columns="columns">
                                <tr>
                                    <td *ngFor="let col of columns" class="ui-resizable-column">
                                        <span *ngIf="col.header != 'Status'">{{rowData[col.field]}}</span>
                                        <span [style.color]="rowData.isError ? '#f44336' : '#333333'"
                                            *ngIf="col.header == 'Status'">{{rowData[col.field]}}%</span>
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                    <div class="ui grid" *ngIf="!showTrainingdashboard || batchList?.length === 0">
                        <div class="one wide column"></div>
                        <div class="ten wide column">
                            <div class="ui two column centered grid no-result-container">
                                <div class="column">
                                    <img src="{{'assets/images/erroricon.png' | cdnprefixurl}}">
                                    <div class="no-result-text">{{resourceService?.messages?.stmsg?.m0131}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="one wide column"></div>
                    </div>
                </div>
                <div class="ui bottom attached segment" suiTabContent="trainingstats">
                    <div class="ui grid">
                        <div class="six wide column" *ngIf="showTrainingstats && enrolledCourseData.length > 0">
                            <p-chart type="doughnut" [data]="donutChartData" height="200px"></p-chart>
                        </div>
                        <div class="six wide column" *ngIf="showTrainingstats && enrolledCourseData.length > 0">
                            <div class="ui two cards">
                                <div class="card" *ngFor="let block of trainingDetailsBlock"
                                    [class.active]="block.label === selectedStatus"
                                    style="cursor: pointer;height: 85px;" (click)="filterEnrolledData(block.label)">
                                    <div class="content center aligned">
                                        <h2 class="description dashboardCardSubText" style="line-height: 20px;">
                                            {{block.value}}</h2>
                                        <div class="meta dashBoardCardText" style="font-size: 0.9em;">{{block.label}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- <div class="reset-button mt-15">
                                <button type="button" class="mini ui basic button" (click)="filterEnrolledData('clear')"
                                    style="font-size: 13px;font-weight: bold;">Clear</button>
                            </div> -->
                        </div>
                    </div>
                    <br>
                    <div class="twelve wide column" *ngIf="showTrainingstats && selectedEnrolledCourseData.length > 0">
                        <p-table #dt [value]="selectedEnrolledCourseData" [columns]="cols" [paginator]="true"
                            [rows]="10" [resizableColumns]="true">
                            <ng-template pTemplate="caption">
                                <div class="ui small left icon input" style="float: left">
                                    <i class="search icon"></i>
                                    <input type="text" pInputText placeholder="Search"
                                        (input)="dt.filterGlobal($event.target.value, 'contains')"
                                        style="width: 210px;">
                                </div>
                                <div class="ui-helper-clearfix">
                                    <button type="button" pButton icon="fa fa-file" iconPos="left" label="Export"
                                        (click)="dt.exportCSV()" style="float:right"></button>
                                </div>
                            </ng-template>
                            <ng-template pTemplate="header" let-columns>
                                <tr>
                                    <th *ngFor="let col of columns" pResizableColumn [style.width]="col.width">
                                        {{col.header}}
                                    </th>
                                </tr>
                            </ng-template>
                            <ng-template pTemplate="body" let-rowData let-columns="columns">
                                <tr>
                                    <td *ngFor="let col of columns" class="ui-resizable-column">
                                        {{rowData[col.field]}}
                                        <img *ngIf="col.header === 'Certificate' && rowData.statusName == 'Completed'"
                                            src="{{'assets/images/certificate-badge.png' | cdnprefixurl}}"
                                            style="height: 20px;margin-left: 20px;cursor: pointer;"
                                            (click)="downloadCertificate(rowData.downloadUrl)">
                                        <img *ngIf="col.header === 'Certificate' && rowData.statusName != 'Completed'"
                                            src="{{'assets/images/certificate-badge-grey.png' | cdnprefixurl}}"
                                            style="height: 20px;margin-left: 20px;cursor: not-allowed;">
                                        <!-- <a href="{{rowData.downloadUrl}}" style="display: inline-flex"
                                            class="ui mini orange button" target="_blank"
                                            *ngIf="col.header === 'Certificate' && rowData.statusName == 'Completed'"><i
                                                class="download icon" style="float: left"></i>&nbsp;Download</a> -->
                                    </td>
                                </tr>
                            </ng-template>
                        </p-table>
                    </div>
                    <div class="ui grid" *ngIf="!showTrainingstats || selectedEnrolledCourseData.length === 0">
                        <div class="one wide column"></div>
                        <div class="ten wide column">
                            <div class="ui two column centered grid no-result-container">
                                <div class="column">
                                    <img src="{{'assets/images/erroricon.png' | cdnprefixurl}}">
                                    <div class="no-result-text">{{resourceService?.messages?.stmsg?.m0131}}</div>
                                </div>
                            </div>
                        </div>
                        <div class="one wide column"></div>
                    </div>
                </div>
                <div class="ui bottom attached segment" suiTabContent="graph">
                    <div *ngFor="let chart of chartData; let i = index; let l = last;">
                        <canvas baseChart [datasets]="chart.datasets" [labels]="chart.labels" [options]="chart.options"
                            [chartType]="chart.chartType" [colors]="chart.colors" [legend]="chart.legend"></canvas>
                        <div class="ui divider" *ngIf="!l"></div>
                    </div>
                    <div class="ui warning message" *ngIf="!chartData.length">
                        {{resourceService?.frmelmnts?.lbl?.graphNotAvailable}}
                    </div>
                </div>
                <div class="ui bottom attached small segment" suiTabContent="tableMenu">
                    <app-data-table *ngIf="isTableDataLoaded" [headerData]="table.header" [rowsData]="table.data">
                    </app-data-table>
                    <div class="ui warning message" *ngIf="!isTableDataLoaded">
                        {{resourceService?.frmelmnts?.lbl?.tableNotAvailable}}
                    </div>
                </div>
            </sui-tabset>
        </div>
    </div>
</div>